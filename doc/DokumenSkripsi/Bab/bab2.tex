%versi 2 (8-10-2016)
\chapter{Landasan Teori}
\label{chap:teori}

Pada bab ini akan dijelaskan landasan teori mengenai \textit{WebSockets}, \textit{Socket.io}, \textit{Node.js}, \textit{Express.js}, dan \textit{Canvas API}.

\section{WebSockets}
\label{sec:WebSockets} 

\textit{WebSockets} merupakan \textit{Application Programming Interface (API)} yang memungkinkan sebuah aplikasi membuka sesi komunikasi interaktif antara \textit{browser} pengguna dan \textit{server} \cite{websockets}. Dengan API ini, pengguna dapat mengirim pesan ke \textit{server} dan menerima respon tanpa harus melakukan \textit{polling} pada \textit{server} terlebih dahulu.

Subbab-subbab berikut menjelaskan beberapa kelas dari \textit{WebSockets}.

\subsection{WebSocket}
Sebuah objek dari kelas \textit{WebSocket} menyediakan \textit{API} untuk membuat dan mengelola koneksi \textit{WebSocket} ke \textit{server}, dan juga untuk mengirim dan menerima data pada koneksi. \textit{Constructor} pada kelas \textit{WebSocket} menerima satu parameter wajib dan satu parameter pilihan. 

Berikut merupakan \textit{constructor} dari kelas \textit{WebSocket} : 

\textbf{WebSocket WebSocket(in DOMString url, in optional DOMString protocols);}
\begin{itemize}
	\item \textbf{url}, merupakan parameter wajib yang menunjukan URL mana yang akan direspon oleh \textit{WebSocket server}.
	
	\item \textbf{protocols}, merupakan parameter pilihan yang dapat berupa satu protokol dengan tipe \textit{string}, atau beberapa protokol dengan tipe \textit{array of strings}. Apabila protokol spesifik tidak dimasukan pada parameter, maka akan diasumsikan sebagai \textit{string} kosong.
	
\end{itemize}

Beberapa atribut yang dimiliki oleh kelas \textit{WebSocket} yaitu sebagai berikut :

\begin{itemize}
	\item \textbf{readyState} \\ Atribut ini menunjukan status dari sebuah koneksi.
	\item \textbf{onclose} \\ Atribut ini merupakan \textit{event listener} yang akan dipanggil pada saat status koneksi \textit{WebSocket} berubah menjadi CLOSED.
	\item \textbf{onerror} \\ Atribut ini merupakan \textit{event listener} yang akan dipanggil apabila terjadi \textit{error}.
	\item \textbf{onmessage} \\ Atribut ini merupakan \textit{event listener} yang akan dipanggil apabila pesan dari server telah diterima.
	\item \textbf{onopen} \\ Atribut ini merupakan \textit{event listener} yang akan dipanggil pada saat status koneksi \textit{WebSocket} berubah menjadi OPEN.
\end{itemize}

Kelas \textit{WebSocket} memiliki dua buah \textit{method}, yaitu : 

\begin{itemize}
	\item close() \\ Berfungsi untuk menutup koneksi \textit{WebSocket} atau menghentikan apabila sedang ada proses koneksi. \textit{Method} ini memiliki tipe kembalian \textit{void}, sehingga tidak akan mengembalikan apapun.
	\item send() \\ Berfungsi untuk mengirim data ke \textit{server} melalui koneksi \textit{WebSocket}. \textit{Method} ini memiliki parameter \textbf{data} yang merupakan sebuah \textit{string} yang akan dikirimkan ke \textit{server}.
\end{itemize}

\subsection{CloseEvent}
\textit{CloseEvent} akan dikirim ke \textit{client} menggunakan protokol \textit{WebSockets} ketika koneksi sudah tertutup. \textit{Constructor} dari kelas ini yaitu : \\

\textbf{CloseEvent()} \\

Properti yang dimiliki oleh kelas ini yaitu : 

\begin{itemize}
	\item \textbf{CloseEvent.code} \\ Mengembalikan sebuah kode untuk menutup koneksi yang dikirimkan oleh \textit{server}.
	\item \textbf{CloseEvent.reason} \\ Mengembalikan alasan dari koneksi yang telah ditutup oleh \textit{server}
	\item \textbf{CloseEvent.wasClean} \\ Mengembalikan \textit{boolean} yang mengindikasi apakah sebuah koneksi sudah tertutup sepenuhnya atau belum.
\end{itemize}

\subsection{MessageEvent}
Kelas ini merepresentasikan pesan yang diterima oleh suatu objek tertentu. \textit{Constructor} dari kelas ini yaitu : \\

\textbf{MessageEvent()} \\

Beberapa properti yang dimiliki oleh kelas ini yaitu : 

\begin{itemize}
	\item \textbf{MessageEvent.data} \\ Merupakan data yang telah dikirimkan oleh pengirim.
	\item \textbf{MessageEvent.lastEventId} \\ Merepresentasikan \textit{ID} yang unik untuk sebuah \textit{Event}.
\end{itemize}


%-------------REVISED LIMIT OF WEBSOCKETS---------

\section{Socket.io}
\label{sec:Socket.io}

\textit{Socket.io} merupakan salah satu teknologi yang memanfaatkan protokol \textit{WebSockets} \cite{socketio}. Teknologi ini memungkinkan sebuah aplikasi untuk melakukan komunikasi dua arah secara \textit{real-time}. \textit{Socket.io} dapat dijalankan di setiap \textit{platform, browser}, dan gawai.

\textit{Socket.io} dibagi menjadi dua \textit{API}, yaitu \textit{Server API} dan \textit{Client API}. Subbab-subbab berikut menjelaskan kelas-kelas yang dimiliki \textit{Socket.io}.

\subsection{Server API}
Kelas-kelas yang ada pada \textit{Server API} digunakan untuk menangani proses yang terjadi dalam \textit{server}. Berikut kelas-kelas yang ada pada \textit{Server API}.

\subsubsection{Server}
Kelas ini memiliki \textit{constructor} sebagai berikut : \\ \textbf{Server(httpServer[, options])}
	\begin{itemize}
		\item \textbf{httpServer}, merupakan \textit{server} yang akan dituju.
		\item \textbf{options}, merupakan parameter pilihan yang dapat berisi objek-objek seperti : 
			\begin{itemize}
				\item \textbf{path}, sebuah \textit{string} yang merepresentasikan nama dari \textit{path} yang akan dituju.
				\item \textbf{serveClient}, sebuah \textit{boolean} yang menunjukan apakah menangani \textit{files} dari \textit{client}.
			\end{itemize}
	\end{itemize}
	
Beberapa \textit{method} yang dimiliki oleh kelas ini yaitu : 

\begin{itemize}
	\item \textbf{path([value])} \\ \textit{Method} ini memiliki parameter \textit{value} yang berupa \textit{string}, dan akan mengembalikan \textit{path} dari server yang akan dituju.
	\item \textbf{close([callback])} \\ \textit{Method} ini berfungsi untuk menutup koneksi pada \textit{socket.io server}. 
\end{itemize}
	
\subsubsection{Namespace}
Kelas ini merepresentasikan kumpulan dari \textit{sockets} yang terhubung dalam lingkup tertentu, yang diidentifikasi oleh sebuah \textit{pathname}. \textit{Client} selalu terhubung ke \textit{/} (\textit{namespace} utama), kemudian dapat terhubung ke \textit{namespace} lainnya ketika menggunakan koneksi yang sama.

Beberapa properti yang dimiliki oleh kelas ini yaitu : 
\begin{itemize}
	\item \textbf{namespace.name} \\ Sebuah \textit{string} yang merupakan \textit{identifier} pada \textit{namespace}.
	\item \textbf{namespace.connected} \\ Sebuah \textit{hash} dari objek \textit{Socket} yang terhubung pada \textit{namespace} saat ini.
	\item \textbf{namespace.adapter} \\ Sebuah adaptor yang digunakan untuk \textit{namespace} tertentu.
\end{itemize}

\subsubsection{Socket}
Kelas ini merupakan kelas yang sangat mendasar untuk melakukan interaksi dengan \textit{browser} milik \textit{client}. Sebuah \textit{Socket} dimiliki oleh \textit{Namespace} tertentu (secara \textit{default} menggunakan \textbf{/}).

Beberapa properti yang dimiliki oleh kelas ini yaitu : 
\begin{itemize}
	\item \textbf{socket.id} \\ Merupakan tanda pengenal yang unik untuk sesi tertentu.
	\item \textbf{socket.client} \\ Merupakan \textit{reference} ke objek \textit{Client} tertentu.
	\item \textbf{socket.request} \\ Merupakan \textit{getter proxy} yang mengembalikan referensi ke \textit{request} yang berasal dari \textit{Client} tertentu.
\end{itemize}

Beberapa \textit{method} yang dimiliki oleh kelas ini yaitu : 
\begin{itemize}
	\item \textbf{socket.send([...args[, ack]])} \\ Berfungsi untuk mengirimkan pesan tertentu.
	\item \textbf{socket.emit(eventName[, ...args][, ack])} \\ Berfungsi untuk mengeluarkan suatu \textit{event} kepada \textit{socket} yang diidentifikasi oleh nama \textit{event} tersebut.
	\item \textbf{socket.disconnect(close)} \\ Berfungsi untuk mengakhiri koneksi milik \textit{client} saat ini.
\end{itemize}

\subsubsection{Client}
Kelas ini merepresentasikan koneksi \textit{transport} yang masuk. \textit{Client} dapat terhubung dengan beberapa \textit{Sockets} yang termasuk dalam \textit{Namespaces} yang berbeda.

Atribut-atribut yang dimiliki oleh kelas ini yaitu : 

\begin{itemize}
	\item \textbf{client.conn} \\ Merupakan referensi kepada koneksi \textit{Socket}.
	\item \textbf{client.request} \\ Berfungsi untuk mengakses \textit{header} dari \textit{request} seperti \textit{Cookie} atau \textit{User-Agent}.
\end{itemize}

\subsection{Client API}
Kelas-kelas yang ada pada \textit{Client API} digunakan untuk menangani proses-proses yang terjadi pada bagian \textit{client}. 

Kelas-kelas yang ada pada \textit{Client API} yaitu : 

\subsubsection{Manager}
Kelas ini memiliki \textit{constructor} sebagai berikut : \\

\textbf{Manager(url[, options])}

\begin{itemize}
	\item \textbf{url} , merupakan sebuah \textit{string} yang merepresentasikan suatu \textit{url} yang akan dituju.
	\item \textbf{options}, merupakan suatu objek yang dapat berupa : 
		\begin{itemize}
			\item \textbf{path}, merupakan sebuah \textit{string} yang merepresentasikan suatu \textit{path} yang akan dituju dalam bagian \textit{server}.
			\item \textbf{reconnection}, merupakan sebuah \textit{boolean} yang menunjukan apakah dapat melakukan koneksi ulang secara otomatis atau tidak.
			\item \textbf{timeout}, merupakan angka yang menunjukan koneksi sudah mencapai \textit{timeout} sebelum terjadi error pada koneksi.
		\end{itemize}
\end{itemize}

\subsubsection{Socket}
Kelas ini memiliki atribut \textbf{id}, yang merupakan tanda pengenal unik untuk sesi saat ini.

Beberapa \textit{method} yang dimiliki oleh kelas \textit{Socket} yaitu : 

\begin{itemize}
	\item \textbf{socket.open()} \\ Berfungsi untuk membuka suatu koneksi \textit{socket} tertentu.
	\item \textbf{socket.emit(eventName[, ...args][, ack])} \\ Berfungsi untuk mengeluarkan suatu \textit{event} kepada \textit{socket} yang diidentifikasi oleh nama \textit{event} tersebut.
	\item \textbf{socket.close()} \\ Berfungsi untuk menutup koneksi suatu \textit{socket} secara manual. 
\end{itemize}

%--------------------- END OF SOCKET.IO -----------------

\section{Node.js}
\label{sec:Node.js}

\textit{Node.js} adalah \textit{JavaScript runtime} yang dibangun berdasarkan \textit{V8} yang merupakan \textit{JavaScript engine} milik perusahaan \textit{Google} \cite{Nodejs}. \textit{Node.js} memiliki model \textit{event-driven}, dan \textit{non-blocking I/O} yang membuat teknologi tersebut efisien dalam implementasinya. Teknologi ini menyediakan beberapa modul atau kelas yang berfungsi untuk mengimplementasi fitur-fitur yang dimiliki.

Beberapa kelas yang terdapat pada \textit{Node.js} yaitu sebagai berikut : 

\subsection{Console}
\textit{Console} merupakan perangkat \textit{debugging} yang memiliki persamaan dengan mekanisme \textit{JavaScript} yang disediakan oleh \textit{web browsers}. Kelas ini dapat digunakan untuk membuat \textit{logger} sederhana dengan \textit{output streams} yang dapat dikonfigurasi. Agar dapat menggunakan kelas ini, dapat dilakukan langkah berikut : 

\begin{itemize}
	\item \textbf{require('console').Console} atau
	\item \textbf{console.Console}
\end{itemize}

Salah satu \textit{method} yang dimiliki oleh kelas ini yaitu : 

\begin{itemize}
	\item \textbf{console.log()} \\ Akan mengeluarkan beberapa argumen pada \textit{stdout (standard output)}.
\end{itemize}

\subsection{File System}
Modul ini berfungsi untuk menangani proses pengaturan \textit{file} pada \textit{server}. Untuk dapat menggunakan modul ini diperlukan \textbf{require('fs')} agar dapat mengakses fitur-fitur yang ada.

Salah satu kelas yang terdapat pada \textit{File System} yaitu : 

\subsubsection{fs.WriteStream}
Kelas ini memiliki beberapa \textit{method} sebagai berikut : 

\begin{itemize}
	\item \textbf{fs.appendFile(file, data[, options],callback)} \\ Berfungsi untuk menambahkan suatu data kedalam \textit{file}, dan membuat \textit{file} baru apabila \textit{file} yang dituju belum tersedia.
	\item \textbf{fs.readFile(file[, options], callback)} \\ Berfungsi untuk membaca seluruh konten dari suatu \textit{file}.
\end{itemize}

\subsection{HTTP}
\textit{HTTP} dalam \textit{Node.js} berfungsi untuk mendukung berbagai fitur dari protokol tersebut yang sulit untuk digunakan. 

Salah satu kelas yang terdapat pada \textit{HTTP} yaitu : 

\subsubsection{http.Server}
Kelas ini memiliki beberapa \textit{method} sebagai berikut : 

\begin{itemize}
	\item \textbf{server.close([callback])} \\ Berfungsi untuk menghentikan \textit{server} dalam menerima koneksi-koneksi baru.
	\item \textbf{server.listen(handle[, callback])} \\ Berfungsi agar \textit{server} dapat menerima koneksi baru dari objek \textit{handle}.
\end{itemize}


%------------- END OF NODE.JS -------------- 
\section{Express.js}
\label{sec:Express.js}

\textit{Express.js} merupakan \textit{framework} aplikasi web untuk \textit{Node.js}. \textit{Express.js} menyediakan fitur-fitur untuk web dan aplikasi \textit{mobile} agar dapat bertahan lama. Untuk dapat menggunakan \textit{Express.js}, dapat dilakukan langkah sebagai berikut : 
\begin{itemize}
	\item \textbf{var express = require('express')}
\end{itemize}

Dengan begitu, fitur-fitur yang terdapat pada \textit{Express.js} dapat digunakan untuk pengembangan aplikasi tertentu.

subbab-subbab berikut akan menjelaskan kelas-kelas yang terdapat pada \textit{Express.js}.

\subsection{Application}
Sebuah objek dari kelas \textit{Application} akan dapat menangani masalah aplikasi dalam pengembangannya. 

Beberapa \textit{method} yang terdapat pada kelas ini yaitu : 
\begin{itemize}
	\item \textbf{app.get()} \\ Berfungsi untuk mengembalikan nama dari sebuah aplikasi tertentu.
	\item \textbf{app.listen(path, [callback])} \\ Berfungsi untuk melakukan koneksi ke suatu \textit{path} yang diberikan.
	\item \textbf{app.path()} \\ Berfungsi untuk mengembalikan \textit{path} tertentu yang dituju.
\end{itemize}

\subsection{Request}
Sebuah objek dari kelas \textit{Request} akan merepresentasikan \textit{HTTP request} dan memiliki properti untuk \textit{request query} seperti \textit{body, HTTP headers} dan \textit{parameters}. 

Beberapa \textit{method} yang ada pada kelas \textit{Request} yaitu : 
\begin{itemize}
	\item \textbf{req.accepts(types)} \\ Berfungsi untuk memeriksa apakah tipe konten tertentu dapat diterima atau tidak.
	\item \textbf{req.get(field)} \\ Berfungsi untuk mengembalikan \textit{HTTP request header} tertentu.
	\item \textbf{req.is(type)} \\ Berfungsi untuk mengembalikan apakah benar atau salah \textit{type} pada parameter sama dengan status \textit{Content-Type} pada \textit{HTTP header}.
\end{itemize}

\subsection{Response}
Sebuah objek dari kelas \textit{Response} akan merepresentasikan respon \textit{HTTP} yang dikirim oleh \textit{Express} pada saat menerima \textit{HTTP request}.

Beberapa \textit{method} yang terdapat pada kelas \textit{Response} yaitu : 

\begin{itemize}
	\item \textbf{res.append(field[, value])} \\ Berfungsi untuk menambahkan \textit{value} tertentu pada \textit{HTTP response header}.
	\item \textbf{res.get(field)} \\ Berfungsi untuk mengembalikan \textit{HTTP response header} yang dispesifikasikan oleh \textit{field}.
\end{itemize}

\subsection{Router}
Objek dari kelas \textit{Router} merupakan \textit{instance} dari \textit{middleware} dan \textit{routes}. Setiap aplikasi \textit{Express} memiliki \textit{router} secara \textit{built-in}. 

Salah satu \textit{method} yang dimiliki oleh kelas \textit{Router} yaitu : 

\begin{itemize}
	\item \textbf{router.route(path)} \\ Berfungsi untuk mengembalikan sebuah \textit{instance} dari satu \textit{route} yang dapat digunakan untuk menangani \textit{HTTP verbs} dengan sebuah \textit{middleware} opsional.
\end{itemize}

%------------- END OF EXPRESS.JS--------------- 

\section{Canvas API}
\label{sec:Canvas API}
 
Canvas API merupakan salah satu elemen \textit{HTML5} yang digunakan untuk membuat gambar grafis dalam aplikasi web. Teknologi ini memiliki fitur untuk membuat komposisi foto, membuat animasi, dan membuat \textit{real-time video processiong} atau \textit{rendering}. Untuk dapat menggunakan elemen \textit{canvas} harus menambahkan \textit{tag} <canvas> pada suatu halaman \textit{HTML}. \textit{Tag} <canvas> memiliki tiga atribut utama dimana atribut tersebut terdapat didalam kurung lancip pada \textit{HTML tag}. Atribut-atribut tersebut yaitu : 

\begin{itemize}
	\item id \\
	Merupakan nama yang akan digunakan sebagai referensi dalam kode JavaScript. Dimana nantinya nama tersebut akan merujuk ke \textit{tag} <canvas> yang memiliki nama yang sama.
	\item width \\
	Merupakan lebar dari \textit{canvas} yang dibuat.
	\item height \\
	Merupakan tinggi dari \textit{canvas} yang dibuat.
\end{itemize}

Menggunakan \textit{Canvas API} membutuhkan dasar yang kuat dalam menggambar , dan merubah bentuk-bentuk dasar dua dimensi. Berikut merupakan bentuk-bentuk dasar dua dimensi yang dapat digambar pada \textit{canvas}.

\begin{itemize}
	\item Rectangle \\
	Untuk menggambar suatu \textit{rectangle} (persegi), \textit{canvas} menyediakan tiga \textit{method} yaitu sebagai berikut:
	\begin{itemize}
		\item fillRect(x,y,width,height) \\
		Menggambar persegi dengan warna yang penuh mengisi bagian dalam persegi pada posisi x,y dengan ukuran persegi \textit{width} dan \textit{height}.
		\item strokeRect(x,y,width,height) \\
		Menggambar garis luar persegi pada posisi x,y dengan ukuran persegi \textit{width} dan \textit{height}.
		\item clearRect(x,y,width,height) \\
		Mengosongkan area tertentu dan membuat area tersebut transparan pada posisi x,y dengan ukuran persegi \textit{width} dan \textit{height}.
	\end{itemize}
	
	\item Paths\\
	Paths merupakan \textit{method} yang digunakan untuk menggambar seluruh bentuk pada \textit{canvas}. Path merupakan kumpulan titik, dan garis yang digambar diantara titik-titik tersebut. Untuk menggunakan path pada \textit{canvas}, dibutuhkan dua fungsi utama. Fungsi tersebut yaitu beginPath(), yang akan mulai membuka suatu path pada canvas, fungsi lainnya yaitu closePath(), yang akan menutup suatu path pada canvas.
	
	\item Arcs \\
	Sebuah \textit{arc} (garis lengkung) dapat berupa suatu lingkaran utuh atau bagian dari lingkaran tertentu. Untuk menggambar sebuah garis lengkung, \textit{Canvas API} menyediakan beberapa fungsi yang dapat digunakan. Salah satu fungsi tersebut yaitu: 
	
	arc(x, y, radius, startAngle, endAngle, anticlockwise).
	
	Nilai x dan y merupakan titik pusat dari lingkaran, dan radius merupakan jarak dari titik pusat ke suatu titik tertentu dimana garis lengkung akan digambar.\textit{startAngle} dan \textit{endAngle} ada dalam satuan radian, bukan derajat. \textit{anticlockwise} merupakan suatu \textit{boolean} yang menandakan apakah garis lengkung tersebut akan searah jarum jam atau tidak.
\end{itemize}

Selain menggambar suatu bentuk tertentu, pada \textit{canvas} pun dapat memberi warna pada bentuk yang sudah dibuat. \textit{Canvas API} memiliki properti yang digunakan untuk memberi warna dasar pada bagian dalam suatu bentuk di \textit{canvas} yang bernama fillStyle. Contoh penggunaan properti tersebut sebagai berikut:

context.fillStyle = ''red'';

Langkah tersebut akan memberikan warna merah pada suatu bentuk tertentu. Selain itu, ada beberapa cara yang dapat dilakukan untuk memberikan warna dasar pada suatu bentuk. Cara tersebut dijelaskan sebagai berikut:

context.fillStyle = ''rgb(255,0,0)'';\\
\textit{Method} rgb() akan menggunakan nilai RGB 24-bit pada saat memberikan warna pada suatu bentuk tertentu.\\

context.fillStyle = ''\#ff0000'';\\
Properti ini dapat menerima bilangan hex dalam bentuk \textit{string}.\\

context.fillStyle = ''rgba(255,0,0,1)'';\\
\textit{Method} rgba() akan menggunakan nilai 32-bit dengan nilai 8 bit di akhir yang merepresentasikan nilai \textit{alpha} pada suatu warna. 
