%versi 2 (8-10-2016)
\chapter{Landasan Teori}
\label{chap:teori}

Pada bab ini akan dijelaskan landasan teori mengenai \textit{WebSockets}, \textit{Socket.io}, \textit{Node.js}, \textit{Express.js}, dan \textit{Canvas API}.

\section{WebSockets}
\label{sec:WebSockets} 

\textit{WebSockets} merupakan \textit{Application Programming Interface (API)} yang memungkinkan sebuah aplikasi mengirim pesan kepada \textit{server} dan mendapatkan \textit{response} tanpa harus melakukan \textit{polling} terlebih dahulu. \textit{WebSockets} ditulis dalam sintaks bahasa pemrograman \textit{JavaScript}. \textit{WebSockets} memiliki beberapa fitur yang akan membantu pembangunan sebuah aplikasi yang membutuhkan koneksi \textit{real-time}. Fitur-fitur tersebut akan dijelaskan sebagai berikut.

\subsection{WebSocket Events}

\textit{WebSockets API} bekerja berdasarkan \textit{events}(kejadian). Kode-kode yang ada pada aplikasi akan memperhatikan suatu \textit{events} pada objek \textit{WebSocket} untuk mengatasi apabila ada data-data yang masuk dan perubahan pada status koneksi. Aplikasi pada \textit{client} tidak perlu melakukan \textit{poll} terhadap \textit{server} untuk memperbarui data. \textit{Events} dan pesan-pesan lainnya akan diterima secara bersamaan saat server mengirimnya.

Sebuah objek \textit{WebSocket} dapat mengirimkan empat \textit{events} yang berbeda, yaitu : 
	
	\begin{itemize}
		\item Open \\
		Setelah \textit{WebSocket server} memberikan respon pada \textit{connection request}, sebuah \textit{open event} akan berjalan dan koneksi akan dibuat. Setelah hal tersebut terjadi, maka \textit{server} telah berhasil melakukan koneksi dan siap untuk mengirim atau menerima suatu pesan dari aplikasi \textit{client}.
		\item Message \\
		Setelah berhasil melakukan koneksi pada \textit{WebSocket server}, maka sudah bisa mengirim atau menerima pesan tertentu. \textit{WebSocket API} akan menyediakan suatu fungsi \textit{onmessage} untuk mengolah pesan yang utuh untuk dikirimkan.
		\item Error \\
		Saat terjadi kesalahan yang disebabkan oleh suatu hal, \textit{error event} akan dieksekusi. Saat kesalahan terjadi, dapat diasumsikan bahwa koneksi \textit{WebSocket} akan tertutup dan \textit{close event} akan dieksekusi.
		\item Close \\
		\textit{Event} ini akan dieksekusi pada saat sebuah koneksi \textit{WebSocket} akan ditutup. Setelah koneksi ditutup, maka komunikasi antara \textit{client} serta \textit{server} tidak akan berlanjut.
	\end{itemize}

\subsection{WebSocket Methods}
Suatu objek \textit{WebSocket} memiliki dua \textit{method}, yaitu \textit{send()} dan \textit{close()}.

\begin{itemize}
	\item send() \\
	Setelah aplikasi melakukan koneksi menggunakan \textit{WebSocket}, maka aplikasi tersebut dapat mengirimkan metode \textit{send()} selama koneksi tetap terbuka. Sebuah aplikasi akan menggunakan \textit{send()} untuk mengirimkan pesan dari \textit{client} menuju \textit{server}. 
	
	\item close()
	Koneksi \textit{WebSocket} dapat dihentikan dengan menggunakan \textit{close() method}. Setelah \textit{method} ini dipanggil, tidak akan ada data yang dikirim atau diterima dari koneksi tersebut. Dalam menutup sebuah koneksi, \textit{close() method} dapat menerima parameter berupa indikasi kepada server yang menunjukan mengapa koneksi tersebut ditutup. Hal itu dilakukan agar dapat lebih mudah dibaca oleh pengguna.
	
\end{itemize}

\section{Socket.io}
\label{sec:Socket.io}

\textit{Socket.io} merupakan \textit{JavaScript library} yang digunakan pada aplikasi web untuk melakukan koneksi secara \textit{realtime}. Teknologi ini memiliki dua bagian \textit{library}: bagian \textit{client} yang dijalankan pada \textit{web browser}, dan bagian \textit{server} yang jalankan untuk \textit{Node.js}. \textit{Socket.io} memiliki fitur-fitur yang beragam, seperti melakukan \textit{broadcast} ke beberapa \textit{sockets}, dan menyimpan data yang berhubungan dengan masing-masing \textit{client}.

\subsection{Connection}
Koneksi yang dimulai oleh \textit{Socket.io} dilakukan dengan cara \textit{handshake}. Hal tersebut merupakan bagian yang penting dalam protokol. \textit{Handshake} hanya dilakukan hanya pada saat memulai koneksi, pesan-pesan atau hal lain dalam protokol akan dikirimkan melalui \textit{socket}. 


\subsection{Messages}
Apabila koneksi telah dilakukan, seluruh komunikasi antara \textit{client} dan \textit{server} akan menggunakan pesan(\textit{message}) melalui \textit{socket}. Pesan yang akan dikirimkan harus diubah kedalam format yang sudah dispesifikasi oleh \textit{socket.io}.

Format yang sudah dispesifikasi oleh \textit{socket.io} bertujuan untuk menentukan jenis pesan dan data yang dikirimkan dalam pesan tersebut. Format pesan yang sudah dispesifikasi yaitu seperti berikut : 

[type] : [id] : [endpoint] (: [data])

\begin{itemize}
	\item \textit{type}, merupakan satu digit angka integer yang menunjukan jenis pesan yang akan dikirim.
	\item \textit{id}, merupakan identitas pesan yang terdiri dari beberapa digit angka.
	\item \textit{endpoint}, merupakan \textit{socket} tujuan yang akan menerima pesan yang sedang dikirim. Apabila tidak ada \textit{endpoint}, maka pesan akan dikirimkan ke \textit{default socket}.
	\item \textit{data}, merupakan data yang akan dikirim ke \textit{socket} tertentu. Pada kasus \textit{messages}, data akan dikirimkan dalam bentuk \textit{plain text}, sementara pada kasus \textit{events} akan dikirimkan dalam bentuk \textit{JSON}.
\end{itemize}

\section{Node.js}
\label{sec:Node.js}

\textit{Node.js} merupakan sebuah platform yang didesain untuk mengembangkan aplikasi berbasis web pada bagian \textit{web server}. \textit{Node.js} ditulis dalam sintaks bahasa pemrograman \textit{JavaScript} dan memiliki sifat \textit{non-blocking} yang berarti \textit{Node.js} tidak akan menunggu untuk mengerjakan \textit{request} selanjutnya. \textit{Node.js} dapat berjalan pada berbagai sistem operasi, seperti \textit{OS X}, \textit{Windows}, dan \textit{Linux}. Dengan begitu, tidak ada batasan dan perbedaan dalam menjalankan fungsi-fungsi yang ada pada berbagai sistem operasi.




\section{Express.js}
\label{sec:Express.js}

Express.js merupakan sebuah \textit{framework} aplikasi web untuk \textit{Node.js}. Express.js menyediakan fitur-fitur yang membuat pengembangan aplikasi web dapat bertahan lama. Teknologi ini pun merupakan modul \textit{node package manager (npm)} yang menjadi ketergantungan dalam suatu aplikasi. Agar dapat berjalan, seluruh \textit{file} yang dimiliki oleh \textit{framework} ini harus berada pada \textit{node\_modules} lokal dalam suatu projek tertentu. 


\section{Canvas API}
\label{sec:Canvas API}
 
Canvas API merupakan salah satu elemen \textit{HTML5} yang digunakan untuk membuat gambar grafis dalam aplikasi web. Teknologi ini memiliki fitur untuk membuat komposisi foto, membuat animasi, dan membuat \textit{real-time video processiong} atau \textit{rendering}. Untuk dapat menggunakan elemen \textit{canvas} harus menambahkan \textit{tag} <canvas> pada suatu halaman \textit{HTML}. \textit{Tag} <canvas> memiliki tiga atribut utama dimana atribut tersebut terdapat didalam kurung lancip pada \textit{HTML tag}. Atribut-atribut tersebut yaitu : 

\begin{itemize}
	\item id \\
	Merupakan nama yang akan digunakan sebagai referensi dalam kode JavaScript. Dimana nantinya nama tersebut akan merujuk ke \textit{tag} <canvas> yang memiliki nama yang sama.
	\item width \\
	Merupakan lebar dari \textit{canvas} yang dibuat.
	\item height \\
	Merupakan tinggi dari \textit{canvas} yang dibuat.
\end{itemize}

Menggunakan \textit{Canvas API} membutuhkan dasar yang kuat dalam menggambar , dan merubah bentuk-bentuk dasar dua dimensi. Berikut merupakan bentuk-bentuk dasar dua dimensi yang dapat digambar pada \textit{canvas}.

\begin{itemize}
	\item Rectangle \\
	Untuk menggambar suatu \textit{rectangle} (persegi), \textit{canvas} menyediakan tiga \textit{method} yaitu sebagai berikut:
	\begin{itemize}
		\item fillRect(x,y,width,height) \\
		Menggambar persegi dengan warna yang penuh mengisi bagian dalam persegi pada posisi x,y dengan ukuran persegi \textit{width} dan \textit{height}.
		\item strokeRect(x,y,width,height) \\
		Menggambar garis luar persegi pada posisi x,y dengan ukuran persegi \textit{width} dan \textit{height}.
		\item clearRect(x,y,width,height) \\
		Mengosongkan area tertentu dan membuat area tersebut transparan pada posisi x,y dengan ukuran persegi \textit{width} dan \textit{height}.
	\end{itemize}
	
	\item Paths\\
	Paths merupakan \textit{method} yang digunakan untuk menggambar seluruh bentuk pada \textit{canvas}. Path merupakan kumpulan titik, dan garis yang digambar diantara titik-titik tersebut. Untuk menggunakan path pada \textit{canvas}, dibutuhkan dua fungsi utama. Fungsi tersebut yaitu beginPath(), yang akan mulai membuka suatu path pada canvas, fungsi lainnya yaitu closePath(), yang akan menutup suatu path pada canvas.
	
	\item Arcs \\
	Sebuah \textit{arc} (garis lengkung) dapat berupa suatu lingkaran utuh atau bagian dari lingkaran tertentu. Untuk menggambar sebuah garis lengkung, \textit{Canvas API} menyediakan beberapa fungsi yang dapat digunakan. Salah satu fungsi tersebut yaitu: 
	
	arc(x, y, radius, startAngle, endAngle, anticlockwise).
	
	Nilai x dan y merupakan titik pusat dari lingkaran, dan radius merupakan jarak dari titik pusat ke suatu titik tertentu dimana garis lengkung akan digambar.\textit{startAngle} dan \textit{endAngle} ada dalam satuan radian, bukan derajat. \textit{anticlockwise} merupakan suatu \textit{boolean} yang menandakan apakah garis lengkung tersebut akan searah jarum jam atau tidak.
\end{itemize}

Selain menggambar suatu bentuk tertentu, pada \textit{canvas} pun dapat memberi warna pada bentuk yang sudah dibuat. \textit{Canvas API} memiliki properti yang digunakan untuk memberi warna dasar pada bagian dalam suatu bentuk di \textit{canvas} yang bernama fillStyle. Contoh penggunaan properti tersebut sebagai berikut:

context.fillStyle = ''red'';

Langkah tersebut akan memberikan warna merah pada suatu bentuk tertentu. Selain itu, ada beberapa cara yang dapat dilakukan untuk memberikan warna dasar pada suatu bentuk. Cara tersebut dijelaskan sebagai berikut:

context.fillStyle = ''rgb(255,0,0)'';\\
\textit{Method} rgb() akan menggunakan nilai RGB 24-bit pada saat memberikan warna pada suatu bentuk tertentu.\\

context.fillStyle = ''\#ff0000'';\\
Properti ini dapat menerima bilangan hex dalam bentuk \textit{string}.\\

context.fillStyle = ''rgba(255,0,0,1)'';\\
\textit{Method} rgba() akan menggunakan nilai 32-bit dengan nilai 8 bit di akhir yang merepresentasikan nilai \textit{alpha} pada suatu warna. 
